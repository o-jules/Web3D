<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Three.js - Scene</title>
	<style>
		html,
		body {
			padding: 0;
			margin: 0;
		}
	</style>
	<script src="./node_modules/three/build/three.js"></script>
	<script src="./node_modules/stats.js/build/stats.min.js"></script>
	<script src="./node_modules/dat.gui/build/dat.gui.min.js"></script>
</head>

<body>
	<div id="webgl-render"></div>
	<script>
		function initStats(type) {
			const panelType = (typeof type !== 'undefined' && type) && !isNaN(type) ? parseInt(type) : 0;
			const stats = new Stats();

			stats.showPanel(panelType);
			document.body.appendChild(stats.dom);
			return stats;
		}

		function init() {
			const stats = initStats();
			const scene = new THREE.Scene();
			const renderer = new THREE.WebGLRenderer();
			renderer.setClearColor(new THREE.Color(0x000000));
			renderer.setSize(window.innerWidth, window.innerHeight);

			const axes = new THREE.AxesHelper(20);
			scene.add(axes);
			// 红色 X轴
			// 蓝色 Y轴
			// 绿色 Z轴

			const controls = new function () {
				this.camera = "PerspectiveCamera";
			};
			let camera;
			function initCamera(type) {
				if (type === "PerspectiveCamera") {
					camera = new THREE.PerspectiveCamera(
						45,
						window.innerWidth / window.innerHeight,
						1,
						1000);
					camera.position.set(15, 0, 60);
					camera.lookAt(scene.position);
				} else {
					camera = new THREE.OrthographicCamera(
						-120, 120,
						60, -60,
						1,
						120
					);
					camera.position.set(0, 10, 10);
					// camera.lookAt(scene.position);
				}
			}
			initCamera(controls.camera);

			const gui = new dat.GUI();
			const controller = gui.add(controls, "camera", ["PerspectiveCamera", "OrthographicCamera"]);
			controller.onChange((type) => {
				initCamera(type);
			});

			const planeGeometry = new THREE.PlaneGeometry(120, 30);
			const planeMaterial = new THREE.MeshBasicMaterial({ color: 0xaaaaaa });
			const plane = new THREE.Mesh(planeGeometry, planeMaterial);
			plane.rotation.x = -0.5 * Math.PI;
			plane.position.set(0, 0, 0);
			scene.add(plane);

			const cubeGeometry = new THREE.BoxGeometry(4, 4, 4);
			const cubeMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });
			const cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
			cube.position.set(0, 2, 2);
			scene.add(cube);

			const spotLight = new THREE.SpotLight(0xffffff);
			spotLight.position.set(-40, 40, -15);
			scene.add(spotLight);

			document.getElementById("webgl-render").appendChild(renderer.domElement);

			let step = 0;
			function renderScene() {
				stats.update();
				requestAnimationFrame(renderScene);
				renderer.render(scene, camera);
			}
			renderScene();

			function onResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize(window.innerWidth, window.innerHeight);
			}
			window.addEventListener("resize", onResize);
		}


		init();
	</script>
</body>

</html>